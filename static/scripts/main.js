"use strict";(()=>{function p(){}function N(t){return t()}function H(){return Object.create(null)}function g(t){t.forEach(N)}function T(t){return typeof t=="function"}function G(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function U(t){return Object.keys(t).length===0}function j(t){return t&&T(t.destroy)?t.destroy:p}var V=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,M=class{constructor(e){this.options=e,this._listeners="WeakMap"in V?new WeakMap:void 0}observe(e,n){return this._listeners.set(e,n),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(n=>{var i;for(let s of n)M.entries.set(s.target,s),(i=this._listeners.get(s.target))===null||i===void 0||i(s)})}};M.entries="WeakMap"in V?new WeakMap:void 0;var X=!1;function ft(){X=!0}function dt(){X=!1}function y(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function Y(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function C(){return k(" ")}function K(){return k("")}function x(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _t(t){return Array.from(t.childNodes)}function I(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e,n){t.classList[n?"add":"remove"](e)}var P;function S(t){P=t}var F=[];var z=[],$=[],W=[],ht=Promise.resolve(),D=!1;function mt(){D||(D=!0,ht.then(Q))}function L(t){$.push(t)}var A=new Set,v=0;function Q(){if(v!==0)return;let t=P;do{try{for(;v<F.length;){let e=F[v];v++,S(e),pt(e.$$)}}catch(e){throw F.length=0,v=0,e}for(S(null),F.length=0,v=0;z.length;)z.pop()();for(let e=0;e<$.length;e+=1){let n=$[e];A.has(n)||(A.add(n),n())}$.length=0}while(F.length);for(;W.length;)W.pop()();D=!1,A.clear(),S(t)}function pt(t){if(t.fragment!==null){t.update(),g(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}function yt(t){let e=[],n=[];$.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),$=e}var gt=new Set;function bt(t,e){t&&t.i&&(gt.delete(t),t.i(e))}var wt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Lt=new Set([...wt]);function vt(t,e,n,i){let{fragment:s,after_update:_}=t.$$;s&&s.m(e,n),i||L(()=>{let o=t.$$.on_mount.map(N).filter(T);t.$$.on_destroy?t.$$.on_destroy.push(...o):g(o),t.$$.on_mount=[]}),_.forEach(L)}function J(t,e){let n=t.$$;n.fragment!==null&&(yt(n.after_update),g(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(t,e){t.$$.dirty[0]===-1&&(F.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(t,e,n,i,s,_,o,u=[-1]){let d=P;S(t);let r=t.$$={fragment:null,ctx:[],props:_,update:p,not_equal:s,bound:H(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:H(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};o&&o(r.root);let a=!1;if(r.ctx=n?n(t,e.props||{},(c,h,...l)=>{let f=l.length?l[0]:h;return r.ctx&&s(r.ctx[c],r.ctx[c]=f)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](f),a&&Ft(t,c)),h}):[],r.update(),a=!0,g(r.before_update),r.fragment=i?i(r.ctx):!1,e.target){if(e.hydrate){ft();let c=_t(e.target);r.fragment&&r.fragment.l(c),c.forEach(b)}else r.fragment&&r.fragment.c();e.intro&&bt(t.$$.fragment),vt(t,e.target,e.anchor,e.customElement),dt(),Q()}S(d)}var $t;typeof HTMLElement=="function"&&($t=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(N).filter(T);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){g(this.$$.on_disconnect)}$destroy(){J(this,1),this.$destroy=p}$on(t,e){if(!T(e))return p;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{let i=n.indexOf(e);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!U(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var O=class{$destroy(){J(this,1),this.$destroy=p}$on(e,n){if(!T(n))return p;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{let s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!U(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function tt(t,e,n){let i=t.slice();return i[11]=e[n],i[13]=n,i}function et(t){let e,n,i,s,_,o,u,d,r=t[0],a=[];for(let c=0;c<r.length;c+=1)a[c]=nt(tt(t,r,c));return{c(){e=w("div"),n=w("div"),i=w("input"),_=C();for(let c=0;c<a.length;c+=1)a[c].c();m(i,"class","search__field"),m(i,"type","search"),m(i,"placeholder","Search composers by last name"),m(n,"class","search"),m(e,"class","search-wrapper")},m(c,h){E(c,e,h),y(e,n),y(n,i),y(n,_);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(n,null);u||(d=[x(i,"input",t[6]),j(s=xt.call(null,i)),j(o=St.call(null,n,t[4])),x(e,"keydown",t[5])],u=!0)},p(c,h){if(h&133){r=c[0];let l;for(l=0;l<r.length;l+=1){let f=tt(c,r,l);a[l]?a[l].p(f,h):(a[l]=nt(f),a[l].c(),a[l].m(n,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=r.length}},d(c){c&&b(e),Y(a,c),u=!1,g(d)}}}function nt(t){let e,n,i=t[11].lastName+"",s,_,o=t[11].firstName+"",u,d,r,a,c;function h(){return t[8](t[13])}return{c(){e=w("a"),n=w("div"),s=k(i),_=k(", "),u=k(o),d=C(),m(n,"class","search__result"),q(n,"search__result_selected",t[2]===t[13]),m(e,"href",r="/composer/"+t[11].slug)},m(l,f){E(l,e,f),y(e,n),y(n,s),y(n,_),y(n,u),y(e,d),a||(c=x(e,"mouseenter",h),a=!0)},p(l,f){t=l,f&1&&i!==(i=t[11].lastName+"")&&I(s,i),f&1&&o!==(o=t[11].firstName+"")&&I(u,o),f&4&&q(n,"search__result_selected",t[2]===t[13]),f&1&&r!==(r="/composer/"+t[11].slug)&&m(e,"href",r)},d(l){l&&b(e),a=!1,c()}}}function Et(t){let e,n,i,s,_,o=t[1]&&et(t);return{c(){e=w("div"),e.innerHTML='<img class="icon" src="/static/img/search-icon.svg" alt="Search"/>',n=C(),o&&o.c(),i=K(),m(e,"class","search-button label")},m(u,d){E(u,e,d),E(u,n,d),o&&o.m(u,d),E(u,i,d),s||(_=[x(e,"click",t[3]),x(e,"keypress",t[3])],s=!0)},p(u,[d]){u[1]?o?o.p(u,d):(o=et(u),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i:p,o:p,d(u){u&&b(e),u&&b(n),o&&o.d(u),u&&b(i),s=!1,g(_)}}}async function kt(t){try{let e=await fetch(`/api/search?q=${t}`);return e.ok?await e.json():[]}catch(e){return console.log(e),[]}}function xt(t){t.focus()}function St(t,e){let n=i=>t&&!t.contains(i.target)&&!i.defaultPrevented&&e();return document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("click",n,!0)}}}function Tt(t,e,n){"use strict";let i=[],s=[void 0,void 0],_=!1,o=0;async function u(){s[0]!==void 0?(n(0,i=await kt(s[0])),s[1]!==void 0?(s[0]=s[1],s[1]=void 0,await u()):s[0]=void 0):n(0,i=[])}function d(){n(1,_=!0)}function r(){n(0,i=[]),n(1,_=!1)}function a(f){f.code==="ArrowUp"&&i.length>0?n(2,o=o>0?o-1:i.length-1):f.code==="ArrowDown"?n(2,o=o<i.length-1?o+1:n(2,o=0)):f.code==="Escape"?r():f.code==="Enter"&&i.length>0&&(location.pathname=`/composer/${i[o].slug}`)}function c(f){let B=f.target.value||void 0;s[0]===void 0?(s[0]=B,u()):s[1]=B}function h(f){n(2,o=f)}return[i,_,o,d,r,a,c,h,f=>h(f)]}var R=class extends O{constructor(e){super(),Z(this,e,Tt,Et,G,{})}},it=R;var ot=t=>!!t&&t instanceof HTMLInputElement,st=t=>{document.documentElement.dataset.theme=t},rt=t=>{localStorage.setItem("theme",t)},Mt=()=>localStorage.getItem("theme"),ct=t=>t?"dark":"light",lt=(t,e)=>{ot(t)&&(t.checked=e)},Ot=({target:t})=>{if(ot(t)){let e=ct(t.checked);rt(e),st(e)}},Ct=(t,e,n)=>{let i=ct(n);rt(i),st(i),lt(e,n)},At=t=>{t&&t.classList.remove("d-none")},Dt=()=>{let t=document.getElementById("switcher"),e=window.matchMedia("(prefers-color-scheme: dark)");t&&(t.addEventListener("change",Ot),e.addEventListener("change",i=>{Ct(i,t,e.matches)}),Mt()==="dark"&&lt(t,!0),At(document.querySelector(".toggle-switch__label")))},ut=()=>{document.addEventListener("DOMContentLoaded",()=>Dt())};ut();var at=document.getElementById("searchBlock");at&&new it({target:at});})();
